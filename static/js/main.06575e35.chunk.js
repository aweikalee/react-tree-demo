(this["webpackJsonpreact-tree-demo"]=this["webpackJsonpreact-tree-demo"]||[]).push([[0],[,,function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return i}));var r=t(0);function c(e,n){var t=Object(r.useRef)(!0),c=Object(r.useCallback)(e,n);Object(r.useEffect)((function(){if(t.current)return t.current=!1,c()}),[t,c])}var a=t(3);function u(e,n){var t=Object(r.useState)((function(){return n||e})),c=Object(a.a)(t,2),u=c[0],i=c[1];return Object(r.useEffect)((function(){n&&i(n)}),[n,i]),[u,i]}function i(e){var n=Object(r.useRef)(e);return Object(r.useEffect)((function(){n.current=e}),[e,n]),n}},,function(e,n,t){"use strict";t.d(n,"c",(function(){return u})),t.d(n,"h",(function(){return i})),t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return d})),t.d(n,"f",(function(){return l})),t.d(n,"d",(function(){return f})),t.d(n,"e",(function(){return s})),t.d(n,"g",(function(){return b})),t.d(n,"i",(function(){return v})),t.d(n,"j",(function(){return p}));var r=t(0),c=t.n(r),a=t(6);function u(e){var n=[],t=new Set;return c.a.Children.map(e,(function(e){return function e(r,u){if(Object(a.b)(r)){var i=r.props,o=i.nodeId,d=i.level,l=i.children;t.has(o)&&console.error("Encountered two tree node with the same nodeId, `".concat(o,"`.")),t.add(o);var f=[],s=[];c.a.Children.map(l,(function(e){Object(a.b)(e)?f.push(e):s.push(e)}));var b=void 0===d||d<u?u:d;n.push(c.a.cloneElement(r,{children:s,level:b})),f.forEach((function(n){return e(n,b+1)}))}}(e,0)})),n}function i(e){for(var n=e.length-1;n>=0&&void 0===e[n];n-=1)e.pop()}function o(e){for(var n=new Map,t=[],r=0;r<e.length;r+=1){var c=e[r],a=c.props.nodeId,u=c.props.level;t.length>u&&(t.splice(u),i(t));var o=t[t.length-1];if(void 0!==o){var d=n.get(o)||[];d.push(c),n.set(o,d)}t[u]=a}return n}function d(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=[];return e.filter((function(e,c){var a=e.props.level;r.length>a&&r.splice(a);var u=!r.includes(!1),i=t(e,c);return r[a]=n(e,c),u&&i}))}function l(e,n){for(var t=-1,r=0;r<n.length;r+=1)if(n[r].props.nodeId===e){t=r;break}return t}function f(e,n){var t=l(e,n),r=[];if(-1===t)return r;for(var c=n[t].props.level,a=t+1;a<n.length;a+=1){var u=n[a];if(u.props.level<=c)break;r.push(u)}return r}function s(e,n){var t=l(e,n),r=[];if(-1===t)return r;for(var c=n[t].props.level,a=t-1;a>=0;a-=1){var u=n[a],i=u.props.level;if(i<c&&(r.push(u),c=i),0===i)break}return r}function b(e,n){var t;if(n.length){for(var r=!1,c=!1,a=0;a<n.length;a+=1){switch(e[n[a].props.nodeId]){case 0:r=!0;break;case 1:r=c=!0;break;case 2:c=!0;break;default:r=!0}if(r&&c)break}r&&c?t=1:r&&!c?t=0:!r&&c&&(t=2)}return t}function v(e,n,t){0===t?delete e[n]:e[n]=t}function p(e,n,t){!0===t?e[n]=t:delete e[n]}},,function(e,n,t){"use strict";t.d(n,"b",(function(){return d}));var r=t(13),c=t(0),a=t.n(c),u=t(18),i=t(9),o=function(e){var n=e.nodeId,t=e.name,o=e.level,d=void 0===o?0:o,l=e.children,f=Object(r.a)(e,["nodeId","name","level","children"]),s=Object(c.useContext)(i.a),b=s.getCheckedState,v=s.isDisabled,p=s.isExpanded,j=s.toggleExpanded,O=s.toggleChecked,h=s.isExpandable,m=b?b(n):0,k=!!v&&v(n),E=!!h&&h(n),C=!(!p||!E)&&p(n),g=a.a.createElement("div",{className:"tree-node-indent"},new Array(d).fill(!0).map((function(e,n){return a.a.createElement("span",{className:"tree-node-indent__unit",key:n})}))),x=E?a.a.createElement("div",{className:"tree-node-expand","data-expanded":C,onClick:function(){return j&&j(n)}},a.a.createElement("svg",{className:"tree-node-expand__icon",viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},a.a.createElement("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}))):a.a.createElement("div",{className:"tree-node-expand-placeholer"}),N=a.a.createElement("div",{className:"tree-node-checkbox"},a.a.createElement(u.Checkbox,{checked:m,disabled:k,onClick:function(){return O&&O(n)}}));return a.a.createElement("div",Object.assign({className:"tree-node"},f),g,x,N,a.a.createElement("div",{className:"tree-node-content"},a.a.createElement("div",{className:"tree-node-name"},t),C&&l))};function d(e){return a.a.isValidElement(e)&&e.type===o}o.displayName="TreeNode",n.a=o},,function(e,n,t){"use strict";var r=t(11);t.d(n,"Tree",(function(){return r.a}));var c=t(6);t.d(n,"TreeNode",(function(){return c.a}));t(16)},function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return d}));var r=t(1),c=t(0),a=t.n(c),u=t(4),i=t(2),o=a.a.createContext({});function d(e){var n=e.checked,t=e.disabled,o=e.expanded,d=e.onChecked,l=e.onExpanded,f=e.onNodeChecked,s=e.onNodeExpanded,b=e.setCheckedState,v=e.setExpandedState,p=e.children,j=e.toNearestChildren,O=Object(i.c)(n),h=Object(i.c)(t),m=Object(i.c)(o),k=Object(i.c)(d),E=Object(i.c)(l),C=Object(i.c)(f),g=Object(i.c)(s),x=Object(i.c)(p),N=Object(i.c)(j),S=Object(c.useCallback)((function(e){return n[e]||0}),[n]),I=Object(c.useCallback)((function(e){return!0===o[e]}),[o]),w=Object(c.useCallback)((function(e){return!0===t[e]}),[t]),y=Object(c.useCallback)((function(e){var n=m.current,t=E.current,c=g.current,a=Object(r.a)({},n);Object(u.j)(a,e,!0!==a[e]),null===c||void 0===c||c(e,a[e]),v(a),null===t||void 0===t||t(a,n)}),[m,g,E,v]),M=Object(c.useCallback)((function(e){var n=x.current,t=N.current,c=O.current,a=h.current,i=k.current,o=C.current,d=function(e){return!0===a[e]};if(!d(e)&&-1!==Object(u.f)(e,n)){var l=Object(r.a)({},c),f=2===c[e]?0:2;Object(u.i)(l,e,f),null===o||void 0===o||o(e,2);var s=Object(u.d)(e,n);Object(u.b)(s,(function(e){return!d(e.props.nodeId)}),(function(e){return!d(e.props.nodeId)})).forEach((function(e){var n=e.props.nodeId;d(n)||(Object(u.i)(l,n,f),null===o||void 0===o||o(n,2))}));for(var v=Object(u.e)(e,n),p=0;p<v.length;p+=1){var j,m=v[p].props.nodeId;if(d(m))break;var E=null===(j=t.get(m))||void 0===j?void 0:j.filter((function(e){return!d(e.props.nodeId)})),g=l[m]||0,S=Object(u.g)(l,E||[]);if(void 0===S||g===S)break;Object(u.i)(l,m,S),null===o||void 0===o||o(m,S)}b(l),null===i||void 0===i||i(l,c)}}),[x,N,O,h,k,C,b]),T=Object(c.useCallback)((function(e){var n=Object(u.f)(e,p);if(-1===n)return!1;var t=p[n];if(a.a.Children.toArray(t.props.children).some((function(e){return e})))return!0;var r=p[n+1];return!!r&&t.props.level<r.props.level}),[p]);return Object(c.useMemo)((function(){return{getCheckedState:S,isDisabled:w,isExpanded:I,toggleExpanded:y,toggleChecked:M,isExpandable:T}}),[S,w,I,y,M,T])}},function(e,n,t){"use strict";var r=t(13),c=t(0),a=t.n(c),u=(t(26),function(e){e.children;var n=e.checked,t=void 0===n?0:n,c=e.disabled,u=void 0!==c&&c,i=Object(r.a)(e,["children","checked","disabled"]);return a.a.createElement("span",Object.assign({className:"checkbox","data-checked":t,"data-disabled":u},i))});u.displayName="Checkbox",n.a=u},function(e,n,t){"use strict";var r=t(3),c=t(0),a=t.n(c),u=t(9),i=t(1),o=t(4),d=t(2);function l(e,n){var t=n.checked,r=n.disabled,a=n.onChecked,u=n.setCheckedState,l=n.children,f=n.toNearestChildren,s=Object(d.c)(t),b=Object(d.c)(r),v=Object(d.c)(a);Object(c.useEffect)((function(){if(e){for(var n=Object(i.a)({},s.current),t=b.current,r=v.current,c=Object(o.b)(l,(function(e){return!t[e.props.nodeId]}),(function(e){return!t[e.props.nodeId]})),a=[],d=0;d<c.length;d+=1){var p=c[d],j=p.props.nodeId,O=p.props.level;a.length>O&&(a.splice(O),Object(o.h)(a));var h=a[a.length-1];if(void 0!==h){var m=h.props.nodeId;2===n[m]&&Object(o.i)(n,j,2)}a[O]=p}f.forEach((function(e,r){var c=e.filter((function(e){return!t[e.props.nodeId]}));if(c&&c.length){var a=Object(o.g)(n,c);void 0!==a&&Object(o.i)(n,r,a)}})),u(n),null===r||void 0===r||r(n,s.current)}}),[e,l,f,s,b,v,u])}t(27);var f=function(e){var n=e.checked,t=e.disabled,i=e.expanded,f=e.onChecked,s=e.onExpanded,b=e.onNodeChecked,v=e.onNodeExpanded,p=e.validateChecked,j=void 0===p||p,O=e.children,h=Object(d.b)({},n),m=Object(r.a)(h,2),k=m[0],E=m[1],C=Object(d.b)({},t),g=Object(r.a)(C,1)[0],x=Object(d.b)({},i),N=Object(r.a)(x,2),S=N[0],I=N[1],w=Object(c.useMemo)((function(){return Object(o.c)(O)}),[O]),y=Object(c.useMemo)((function(){return Object(o.a)(w)}),[w]);l(j,{checked:k,disabled:g,onChecked:f,setCheckedState:E,children:w,toNearestChildren:y});var M=Object(u.b)({checked:k,disabled:g,expanded:S,onChecked:f,onExpanded:s,onNodeChecked:b,onNodeExpanded:v,setCheckedState:E,setExpandedState:I,children:w,toNearestChildren:y}),T=Object(c.useMemo)((function(){return Object(o.b)(w,(function(e){return S[e.props.nodeId]||!1}))}),[S,w]);return a.a.createElement(u.a.Provider,{value:M},a.a.createElement("div",null,T))};f.displayName="Tree";n.a=f},,,,function(e,n){},function(e,n){},,function(e,n,t){"use strict";var r=t(10);t.d(n,"Checkbox",(function(){return r.a}));t(15)},function(e,n,t){e.exports=t(28)},,,,,function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),a=t(17),u=t.n(a),i=(t(24),t(3)),o=t(7),d=t.n(o),l=t(5),f=t(12),s=t(1),b=t(8),v=0;function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=v++,t=Object(s.a)(Object(s.a)({},e),{},{id:"".concat(e.id?e.id:n),pid:e.pid?e.pid:null,name:"".concat(e.name||"\u8282\u70b9"," ").concat(n)});return t}var j=[p({name:"\u5f02\u6b65",loadData:!0}),p({name:"\u7981\u7528",disabled:!0}),p({name:"\u7236\u8282\u70b9 \u9ed8\u8ba4\u52fe\u9009",checked:!0}),p({name:"\u5b50\u8282\u70b9 \u9ed8\u8ba4\u52fe\u9009"}),p({name:"\u591a\u7ea7"})],O=j[1].id;j.push(p({pid:O,disabled:!0}),p({pid:O})),O=j[2].id,j.push(p({pid:O}),p({pid:O})),O=j[3].id,j.push(p({pid:O,checked:!0}),p({pid:O})),function(){for(var e=[j[4]],n=0;n<4;n+=1){for(var t=[];e.length;){var r=e.shift().id,c=[p({pid:r,loadData:!0}),p({pid:r,disabled:!0})];t.push.apply(t,c),j.push.apply(j,c)}e=t}}();function h(e){return new Promise((function(n){setTimeout((function(){n(e)}),500)}))}var m={data:function(){return h(j)},more:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return h(new Array(n).fill(!0).map((function(){return p({pid:e})})))}},k=t(2);var E=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)({}),o=Object(i.a)(u,2),v=o[0],p=o[1],j=Object(r.useState)({}),O=Object(i.a)(j,2),h=O[0],E=O[1],x=Object(r.useState)({}),N=Object(i.a)(x,2),S=N[0],I=N[1],w=Object(r.useState)({}),y=Object(i.a)(w,2),M=y[0],T=y[1],D=Object(k.c)(M),J=Object(r.useCallback)((function(e){var n={},t={},r={},c={};e.forEach((function(e){var a=e.id,u=e.checked,i=e.disabled,o=e.expanded,d=e.loadData;u&&(n[a]=2),i&&(t[a]=!0),o&&(r[a]=!0),d&&(c[a]=0)})),p((function(e){return Object(s.a)(Object(s.a)({},e),n)})),E((function(e){return Object(s.a)(Object(s.a)({},e),t)})),I((function(e){return Object(s.a)(Object(s.a)({},e),r)})),T((function(e){return Object(s.a)(Object(s.a)({},e),c)}))}),[p,E,I,T]);Object(k.a)((function(){m.data().then((function(e){J(e),a((function(n){return C(n,e)}))}))}),[J,a]);var _=Object(r.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(n,t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!(void 0===(r=D.current[n])||r>0)){e.next=5;break}return e.abrupt("return");case 5:return T((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},n,1))})),e.next=8,m.more(n,10);case 8:c=e.sent,T((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},n,2))})),J(c),a((function(e){return C(e,c)}));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[a,D,T,J]),A=Object(r.useMemo)((function(){return t.map((function(e){return function e(n){return c.a.createElement(b.TreeNode,{key:n.id,nodeId:n.id,name:n.name},n.children,n.nodeChildren.map((function(n){return e(n)})),n.loadData&&2!==M[n.id]&&c.a.createElement("div",null,"\u52a0\u8f7d\u4e2d..."))}(e)}))}),[t,M]);return c.a.createElement("div",null,!A.length&&c.a.createElement("div",null,"\u52a0\u8f7d\u4e2d..."),c.a.createElement(b.Tree,{checked:v,disabled:h,expanded:S,onChecked:p,onExpanded:I,onNodeExpanded:_},A),c.a.createElement("button",{onClick:function(){return function(e,n){var t=[];for(var r in e)if(2===e[r]){var c=g(r,n);c&&t.push(c)}console.log(t)}(v,t)}},"\u6253\u5370\u9009\u4e2d"))};function C(e,n){var t=JSON.parse(JSON.stringify(e));return n.forEach((function(e){var n=Object(s.a)(Object(s.a)({},e),{},{nodeChildren:[]});if(n.pid){var r=g(n.pid,t);r?r.nodeChildren.push(n):t.push(n)}else t.push(n)})),t}function g(e,n){for(var t=0;t<n.length;t+=1){var r=x(e,n[t]);if(r)return r}}function x(e,n){if(n.id===e)return n;var t=n.nodeChildren;if(t)for(var r=0;r<t.length;r+=1){var c=x(e,t[r]);if(c)return c}}var N=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)({}),o=Object(i.a)(u,2),v=o[0],p=o[1],j=Object(r.useState)({}),O=Object(i.a)(j,2),h=O[0],E=O[1],C=Object(r.useState)({}),g=Object(i.a)(C,2),x=g[0],N=g[1],w=Object(r.useState)({}),y=Object(i.a)(w,2),M=y[0],T=y[1],D=Object(k.c)(M),J=Object(r.useCallback)((function(e){var n={},t={},r={},c={};e.forEach((function(e){var a=e.id,u=e.checked,i=e.disabled,o=e.expanded,d=e.loadData;u&&(n[a]=2),i&&(t[a]=!0),o&&(r[a]=!0),d&&(c[a]=0)})),p((function(e){return Object(s.a)(Object(s.a)({},e),n)})),E((function(e){return Object(s.a)(Object(s.a)({},e),t)})),N((function(e){return Object(s.a)(Object(s.a)({},e),r)})),T((function(e){return Object(s.a)(Object(s.a)({},e),c)}))}),[p,E,N,T]);Object(k.a)((function(){m.data().then((function(e){J(e),a((function(n){return S(n,e)}))}))}),[J,a]);var _=Object(r.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(n,t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!(void 0===(r=D.current[n])||r>0)){e.next=5;break}return e.abrupt("return");case 5:return T((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},n,1))})),e.next=8,m.more(n,10);case 8:c=e.sent,T((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},n,2))})),J(c),a((function(e){return S(e,c)}));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[a,D,T,J]),A=Object(r.useMemo)((function(){return t.map((function(e){return c.a.createElement(b.TreeNode,{key:e.id,nodeId:e.id,name:e.name,level:e.level},e.children,e.loadData&&2!==M[e.id]&&c.a.createElement("div",null,"\u52a0\u8f7d\u4e2d..."))}))}),[t,M]);return c.a.createElement("div",null,!A.length&&c.a.createElement("div",null,"\u52a0\u8f7d\u4e2d..."),c.a.createElement(b.Tree,{checked:v,disabled:h,expanded:x,onChecked:p,onExpanded:N,onNodeExpanded:_},A),c.a.createElement("button",{onClick:function(){return function(e,n){var t=[];for(var r in e)if(2===e[r]){var c=I(n,r);-1!==c&&t.push(n[c])}console.log(t)}(v,t)}},"\u6253\u5370\u9009\u4e2d"))};function S(e,n){var t=e.slice();return n.forEach((function(e){var n=Object(s.a)(Object(s.a)({},e),{},{level:0});if(n.pid){var r=I(t,n.pid),c=-1===r?0:t[r].level;for(r=-1===r?t.length:r+1;r<t.length&&!((t[r].level||0)<=c);r+=1);n.level=c+1,t.splice(r,0,n)}else t.push(n)})),t}function I(e,n){for(var t=-1,r=e.length-1;r>=0;r-=1)if(n===e[r].id){t=r;break}return t}var w=function(){var e=["\u5d4c\u5957\u5bf9\u8c61\u751f\u6210\u7684\u6811\u72b6\u56fe","\u4e00\u7ef4\u6570\u7ec4\u751f\u6210\u7684\u6811\u72b6\u56fe"],n=Object(r.useState)(0),t=Object(i.a)(n,2),a=t[0],u=t[1],o=Object(r.useState)(e[0]),d=Object(i.a)(o,2),l=d[0],f=d[1],s=Object(r.useMemo)((function(){switch(a){case 1:return c.a.createElement(N,null);default:return c.a.createElement(E,null)}}),[a]);return c.a.createElement("div",null,e.map((function(e,n){return c.a.createElement("button",{key:e,onClick:function(){u(n),f(e)}},e)})),c.a.createElement("div",null,l),s)};u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.06575e35.chunk.js.map